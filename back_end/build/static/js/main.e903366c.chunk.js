(this.webpackJsonpfront_end=this.webpackJsonpfront_end||[]).push([[0],{204:function(e,t,a){e.exports=a(356)},356:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),i=a.n(c),u=a(20),l=a(18),o=a(373),s=a(372),m=a(368),p=a(25),d=a(44),f=a(15),E=a.n(f),g=a(24),v=a(31),b=a.n(v),h={login:function(){var e=Object(g.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y={username:null,token:null,id:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return y;default:return e}},w=a(374),j=a(375),S=a(369),N=a(367),x=(a(65),Object(u.b)((function(e){return{user:e.user}}),{userLogin:function(e){return function(t){h.login(e).then((function(e){t({type:"LOGIN",data:e}),t({type:"NEW",data:{message:"Welcome ".concat(e.username,"!"),type:"success"}}),window.localStorage.setItem("loggedappUser",JSON.stringify(e))}),(function(e){t({type:"NEW",data:{message:"Invalid credentials.",type:"negative"}})}))}}})((function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(""),o=Object(l.a)(u,2),m=o[0],d=o[1];return r.a.createElement("div",{className:"dcontainer"},r.a.createElement(w.a,{placeholder:!0},r.a.createElement(j.a,{columns:2,relaxed:"very",stackable:!0},r.a.createElement(j.a.Column,null,r.a.createElement(S.a,{onSubmit:function(t){t.preventDefault();var a={username:c,password:m};e.userLogin(a)}},r.a.createElement(S.a.Input,{icon:"user",value:c,onChange:function(e){var t=e.target;return i(t.value)},iconPosition:"left",label:"Username",placeholder:"Username"}),r.a.createElement(S.a.Input,{icon:"lock",type:"password",value:m,onChange:function(e){var t=e.target;return d(t.value)},iconPosition:"left",label:"Password"}),r.a.createElement(s.a,{type:"submit",content:"Login",primary:!0}))),r.a.createElement(j.a.Column,{verticalAlign:"middle"},r.a.createElement(s.a,{as:p.b,to:"/register",content:"Sign up",icon:"signup",size:"big"}))),r.a.createElement(N.a,{vertical:!0},"Or")))}))),C=Object(d.f)(x),I=a(193),k=function(e){return r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement(j.a.Column,{width:4},r.a.createElement("h2",null,e.item.item_name)," ",r.a.createElement("p",null,"Added on: ",e.item.date),r.a.createElement("p",null," ",e.item.item_description)),r.a.createElement(j.a.Column,{width:6},r.a.createElement(I.a,{src:e.item.cloudImage}))))},T={register:function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json "}},e.next=3,b.a.post("/api/register",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type,e},_=function(e){return function(t){t({type:"NEW",data:e})}},A={message:null,type:null},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW":return t.data;default:return e}},U={userRegister:function(e){return function(t){return T.register(e).then((function(e){t({type:"REGISTER",registeredUser:e.data}),t({type:"NEW",data:{message:"Success! You can log in now :)",type:"success"}})}),(function(e){t({type:"NEW",data:{message:"There is some kind of error, try again.",type:"negative"}})}))}},newNotification:_},R=Object(u.b)(null,U)((function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(""),o=Object(l.a)(u,2),m=o[0],p=o[1];return r.a.createElement("div",{className:"dcontainer"},r.a.createElement(w.a,{placeholder:!0},r.a.createElement(S.a,{onSubmit:function(t){t.preventDefault();var a={username:c,password:m};e.userRegister(a),e.history.push("/login")}},r.a.createElement(S.a.Field,{className:"register"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{placeholder:"Username",value:c,onChange:function(e){var t=e.target;return i(t.value)},required:!0})),r.a.createElement(S.a.Field,{className:"register"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{placeholder:"Password",type:"password",value:m,onChange:function(e){var t=e.target;return p(t.value)},required:!0})),r.a.createElement(s.a,{type:"submit"},"Submit"))))})),L=Object(d.f)(R),P=null,F=function(){var e=Object(g.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/items");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"content-type":"multipart/form-data",Authorization:P}},e.next=3,b.a.post("/api/items",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"content-type":"multipart/form-data",Authorization:P}},e.next=3,b.a.put("".concat("/api/items","/").concat(a),t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:P}},e.next=3,b.a.put("".concat("/api/items","/rate/").concat(a),t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),J={getAll:F,create:H,update:z,remove:function(){var e=Object(g.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:P}},e.next=3,b.a.delete("".concat("/api/items","/").concat(t),a);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){P="bearer ".concat(e)},rate:G,destroyToken:function(){P=null}},M=a(73),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return t.data;case"CREATE":return[].concat(Object(M.a)(e),[t.data]);case"UPDATE":return e.map((function(e){return e.id!==t.id?e:t.data}));case"DELETE":return e.filter((function(e){return e.id!==t.id}));default:return e}},B=a(366),Y={newEntry:function(e){return function(t){J.create(e).then((function(e){t({type:"CREATE",data:e}),t({type:"NEW",data:{message:"Success! New item added!",type:"success"}})}),(function(e){t({type:"NEW",data:{message:"Error creating item. Please try again.",type:"negative"}})}))}},newNotification:_},K=Object(u.b)(null,Y)((function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(""),o=Object(l.a)(u,2),m=o[0],p=o[1],d=Object(n.useState)(null),f=Object(l.a)(d,2),E=f[0],g=f[1];return r.a.createElement("div",{className:"dataForm"},r.a.createElement(S.a,{onSubmit:function(t){t.preventDefault();var a=new FormData;a.append("item_name",c),a.append("item_description",m),a.append("clodImage",E),e.newEntry(a)}},r.a.createElement(S.a.Field,null,r.a.createElement("input",{type:"text",value:c,onChange:function(e){var t=e.target;return i(t.value)},required:!0,placeholder:"Movie title",width:9})),r.a.createElement(S.a.Field,null,r.a.createElement(B.a,{style:{minHeight:100},value:m,onChange:function(e){var t=e.target;return p(t.value)},placeholder:"Description"})),r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target;return g(t.files[0])}}),r.a.createElement(s.a,{type:"submit"},"submit")))})),Q=a(376),V=Object(u.b)((function(e){return{data:e.data,user:e.user,notification:e.notification}}),{rateItem:function(e,t){return function(){var a=Object(g.a)(E.a.mark((function a(n){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J.rate(e,t).then((function(e){n({type:"UPDATE",data:e,id:t}),n({type:"NEW",data:{message:"Success! Item Rated!",type:"success"}})}),(function(e){n({type:"NEW",data:{message:"Error updating item. Please try again.",type:"negative"}})}));case 2:a.sent;case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(0),a=Object(l.a)(t,2),c=(a[0],a[1],function(t,a){var n=a.rating,r=(a.maxRating,a.id),c={item_rating:n.toString()};e.rateItem(c,r)});return r.a.createElement("div",{className:"dataGrid"},e.data.map((function(e){return r.a.createElement("div",null," ",r.a.createElement(j.a,null,r.a.createElement(j.a.Column,{width:7},r.a.createElement("div",null,r.a.createElement("h2",null,e.item_name)," ",r.a.createElement("em",null,"Added on: ",e.date)),r.a.createElement("p",null,e.item_description),r.a.createElement("p",null,r.a.createElement("em",null,"Rating: ",e.item_rating)),r.a.createElement("div",null,r.a.createElement(Q.a,{icon:"star",id:e.id,maxRating:10,onRate:c}))),r.a.createElement(j.a.Column,{width:7},r.a.createElement(I.a,{src:e.cloudImage}))))})))})),X=Object(d.f)(V),Z=a(371),$=Object(u.b)((function(e){return{notification:e.notification}}),{newNotification:_})((function(e){if(null===e.notification.message)return null;e.notification.type;return"success"===e.notification.type?r.a.createElement("div",null,r.a.createElement(Z.a,{success:!0},r.a.createElement(Z.a.Header,null,e.notification.message)),r.a.createElement("p",{style:{display:"none"}}," ",setTimeout((function(){return e.newNotification({message:null,type:null})}),1e3))):r.a.createElement("div",null,r.a.createElement(Z.a,{negative:!0},r.a.createElement(Z.a.Header,null,e.notification.message),r.a.createElement("p",null,"Try again please."),r.a.createElement("p",{style:{display:"none"}}," ",setTimeout((function(){return e.newNotification({message:null,type:null})}),5e3))))})),ee={edit:function(e,t){return function(){var a=Object(g.a)(E.a.mark((function a(n){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J.update(e,t).then((function(e){n({type:"UPDATE",data:e,id:t}),n({type:"NEW",data:{message:"Success! Item updated!",type:"success"}})}),(function(e){n({type:"NEW",data:{message:"Error updating item. Please try again.",type:"negative"}})}));case 2:a.sent;case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},remove:function(e){return function(){var t=Object(g.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.remove(e).then((function(t){a({type:"DELETE",id:e}),a({type:"NEW",data:{message:"Success! Item removed!",type:"success"}})}),(function(e){a({type:"NEW",data:{message:"Error deleting item. Please try again.",type:"negative"}})}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},te=Object(u.b)(null,ee)((function(e){var t=Object(n.useState)(e.item.item_name),a=Object(l.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(e.item.item_description),o=Object(l.a)(u,2),m=o[0],p=o[1],d=Object(n.useState)(null),f=Object(l.a)(d,2),E=f[0],g=f[1];return r.a.createElement("div",{className:"dataForm"},r.a.createElement(S.a,{onSubmit:function(t){t.preventDefault();var a=new FormData;a.append("item_name",c),a.append("item_description",m),a.append("clodImage",E);var n=e.item.id;e.edit(a,n)}},r.a.createElement(S.a.Field,null,r.a.createElement("input",{type:"text",value:c,onChange:function(e){i(e.target.value)},required:!0,placeholder:"Movie title",width:9})),r.a.createElement(S.a.Field,null,r.a.createElement(B.a,{style:{minHeight:100},value:m,onChange:function(e){p(e.target.value)},placeholder:"Description"})),r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target;return g(t.files[0])}}),r.a.createElement(s.a,{type:"submit"},"Update")),r.a.createElement("div",null,r.a.createElement(s.a,{onClick:function(){e.remove(e.item.id),e.history.push("/")}},"Delete")))})),ae=Object(d.f)(te),ne=a(370),re={getUserInfo:function(){var e=Object(g.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat("/api/users","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ce=Object(u.b)((function(e){return{user:e.user}}),null)((function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){re.getUserInfo(e.user.id).then((function(e){i([].concat(Object(M.a)(c),Object(M.a)(e.items)))}))}),[]),r.a.createElement("div",null,r.a.createElement("em",null,e.user.username," is logged in."),r.a.createElement("h2",null,"My entries"),r.a.createElement(ne.a,{striped:!0},r.a.createElement(ne.a.Header,null,r.a.createElement(ne.a.Row,null,r.a.createElement(ne.a.HeaderCell,null,"Movie"),r.a.createElement(ne.a.HeaderCell,null,"Date "),r.a.createElement(ne.a.HeaderCell,null,"Rating"))),r.a.createElement(ne.a.Body,null,c.map((function(e){return r.a.createElement(ne.a.Row,null,r.a.createElement(ne.a.Cell,null,e.item_name),r.a.createElement(ne.a.Cell,null,e.date),r.a.createElement(ne.a.Cell,null,e.item_rating),r.a.createElement(ne.a.Cell,null," ",r.a.createElement(s.a,{as:p.b,to:"/item/".concat(e.id),primary:!0},"Show")),r.a.createElement(ne.a.Cell,null," ",r.a.createElement(s.a,{as:p.b,to:"/edit/".concat(e.id),primary:!0},"Edit")))})))))})),ie={initAll:function(e){return function(){var t=Object(g.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.getAll(e);case 2:n=t.sent,a({type:"INIT",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},userLogOut:function(){return function(e){e({type:"LOGOUT"}),e({type:"NEW",data:{message:"See ya later.",type:"success"}})}}},ue=Object(u.b)((function(e){return{data:e.data,user:e.user,notification:e.notification}}),ie)((function(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)("home"),f=Object(l.a)(u,2),E=f[0],g=f[1],v=function(t){return e.data.find((function(e){return e.id===t.toString()}))},b=function(e,t){var a=t.name;return g(a)};Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedappUser");if(e){var t=JSON.parse(e);i(JSON.parse(e)),J.setToken(t.token)}}),[e]),Object(n.useEffect)((function(){e.initAll()}),[]);var h=function(t){t.preventDefault(),window.localStorage.clear(),e.userLogOut(),i(null)};return r.a.createElement(m.a,null,r.a.createElement(p.a,null,c?r.a.createElement(o.a,{size:"large"},r.a.createElement(o.a.Item,{name:"home",as:p.b,to:"/",active:"home"===E,onClick:b}),r.a.createElement(o.a.Item,{name:"create",as:p.b,to:"/create",active:"create"===E,onClick:b}),r.a.createElement(o.a.Item,{name:"profile",as:p.b,to:"/profile",active:"profile"===E,onClick:b}),r.a.createElement(o.a.Menu,{position:"right"},r.a.createElement(o.a.Item,null,r.a.createElement("form",{onSubmit:h},r.a.createElement(s.a,{type:"submit",primary:!0}," Sign out"))))):null,r.a.createElement(d.b,{path:"/register",render:function(){return r.a.createElement(L,null)}}),r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return c?r.a.createElement(X,null):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{path:"/profile",render:function(){return c?r.a.createElement(ce,null):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{path:"/login",render:function(){return null===c?r.a.createElement(C,null):r.a.createElement(d.a,{to:"/"})}}),r.a.createElement(d.b,{path:"/create",render:function(){return c?r.a.createElement(K,null):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{path:"/item/:id",render:function(e){var t=e.match;return r.a.createElement(k,{item:v(t.params.id)})}}),r.a.createElement(d.b,{exact:!0,path:"/edit/:id",render:function(e){var t=e.match;return c?r.a.createElement(ae,{item:v(t.params.id)}):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement($,null)))})),le=a(62),oe=a(192),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_FILTER":return t.data;default:return e}},me=Object(le.c)({data:q,filter:se,user:O,registeredUser:W,notification:D}),pe=Object(le.d)(me,Object(le.a)(oe.a)),de=function(){i.a.render(r.a.createElement(u.a,{store:pe},r.a.createElement(ue,null)),document.getElementById("root"))};de(),pe.subscribe(de)},65:function(e,t,a){}},[[204,1,2]]]);
//# sourceMappingURL=main.e903366c.chunk.js.map
(this.webpackJsonpfront_end=this.webpackJsonpfront_end||[]).push([[0],{204:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(38),u=n.n(c),i=n(22),o=n(20),l=n(32),s=n(16),p=n.n(s),m=n(27),d=n(41),f=n.n(d),g={login:function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=n(173),E=n.n(v)()(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;default:return e}},y=function(e){return function(t){t({type:"NEW",data:e})}},h={message:null,type:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"NEW":return t.data;default:return e}},w=n(378),j=n(377),S=n(372),N=n(376),x=n(370),I=n(31),C=n(44),k={userLogin:function(e){return function(t){g.login(e).then((function(e){t({type:"LOGIN",data:JSON.stringify(e)}),t({type:"NEW",data:{message:"Welcome ".concat(JSON.stringify(e.username)),type:"success"}}),window.localStorage.setItem("loggedappUser",JSON.stringify(e)),E.push("/")}),(function(e){t({type:"NEW",data:{message:"Invalid credentials.",type:"negative"}})}))}},newNotification:y},T=Object(i.b)(null,k)((function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],u=n[1],i=Object(a.useState)(""),s=Object(o.a)(i,2),p=s[0],m=s[1];return r.a.createElement("div",null,r.a.createElement(w.a,{placeholder:!0},r.a.createElement(j.a,{columns:2,relaxed:"very",stackable:!0},r.a.createElement(j.a.Column,null,r.a.createElement(S.a,{onSubmit:function(t){t.preventDefault();var n={username:c,password:p};e.userLogin(n)}},r.a.createElement(S.a.Input,{icon:"user",value:c,onChange:function(e){var t=e.target;return u(t.value)},iconPosition:"left",label:"Username",placeholder:"Username"}),r.a.createElement(S.a.Input,Object(l.a)({icon:"lock",type:"password",value:p,onChange:function(e){var t=e.target;return m(t.value)},iconPosition:"left",label:"Password"},"type","password")),r.a.createElement(N.a,{type:"submit",content:"Login",primary:!0}))),r.a.createElement(j.a.Column,{verticalAlign:"middle"},r.a.createElement(N.a,{as:I.b,to:"/register",content:"Sign up",icon:"signup",size:"big"}))),r.a.createElement(x.a,{vertical:!0},"Or")))})),U=Object(C.f)(T),W={register:function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json "}},e.next=3,f.a.post("/api/register",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return console.log(t.type),console.log(t.registeredUser),t.type,e},_={userRegister:function(e){return function(t){return W.register(e).then((function(e){t({type:"REGISTER",registeredUser:e.data}),t({type:"NEW",data:{message:"Success! You can log in now :)",type:"success"}})}),(function(e){t({type:"NEW",data:{message:"There is some kind of error, try again.",type:"negative"}})}))}},newNotification:y},D=Object(i.b)(null,_)((function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],u=n[1],i=Object(a.useState)(""),l=Object(o.a)(i,2),s=l[0],p=l[1];return r.a.createElement(S.a,{onSubmit:function(t){t.preventDefault();var n={username:c,password:s};e.userRegister(n),e.history.push("/login")}},r.a.createElement(S.a.Field,null,r.a.createElement("label",null,"First Name"),r.a.createElement("input",{placeholder:"First Name",value:c,onChange:function(e){var t=e.target;return u(t.value)},required:!0})),r.a.createElement(S.a.Field,null,r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{placeholder:"Password",type:"password",value:s,onChange:function(e){var t=e.target;return p(t.value)},required:!0})),r.a.createElement(N.a,{type:"submit"},"Submit"))})),L=Object(C.f)(D),P=null,F={getAll:function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/items");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"content-type":"multipart/form-data",Authorization:P}},e.next=3,f.a.post("/api/items",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat("/api/items","/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat("/api/items","/").concat(t.id));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){P="bearer ".concat(e)}},J=n(193),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"INIT":return t.data;case"CREATE":return[].concat(Object(J.a)(e),[t.data]);case"UPDATE":return e.map((function(e){return e.id===t.data.id?e:t.data}));case"DELETE":return e.filter((function(e){return e.id!==t.data.id}));default:return e}},z={newEntry:function(e){return function(t){var n=F.create(e).then((function(e){t({type:"CREATE",data:n}),t({type:"NEW",data:{message:"Success! New item added!",type:"success"}})}),(function(e){t({type:"NEW",data:{message:"Error creating item. Please try again.",type:"negative"}})}))}},newNotification:y},G=Object(i.b)(null,z)((function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],u=n[1],i=Object(a.useState)(""),l=Object(o.a)(i,2),s=l[0],p=l[1],m=Object(a.useState)(null),d=Object(o.a)(m,2),f=d[0],g=d[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("item_name",c),n.append("item_description",s),n.append("clodImage",f),e.newEntry(n)}},r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:c,onChange:function(e){var t=e.target;return u(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:s,onChange:function(e){var t=e.target;return p(t.value)}})),r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target;return g(t.files[0])}}),r.a.createElement("button",{type:"submit"},"Sumbit"))})),q=n(192),H=n(375),B=Object(i.b)((function(e){return{data:e.data}}),null)((function(e){var t=Object(a.useState)("home"),n=Object(o.a)(t,2),c=n[0],u=n[1],i=function(){window.localStorage.clear()},l=function(e,t){var n=t.name;return u(n)};return r.a.createElement("div",null,r.a.createElement((function(){return r.a.createElement(H.a,{size:"large"},r.a.createElement(H.a.Item,{name:"home",as:I.b,to:"/home",active:"home"===c,onClick:l}),r.a.createElement(H.a.Item,{name:"create",as:I.b,to:"/create",active:"messages"===c,onClick:l}),r.a.createElement(H.a.Menu,{position:"right"},r.a.createElement(H.a.Item,null,r.a.createElement(N.a,{as:I.b,to:"/login",onClick:i,primary:!0}," Login"))))}),null),e.data.map((function(e){return r.a.createElement(j.a,null,r.a.createElement(j.a.Column,{width:4},e.item_name),r.a.createElement(j.a.Column,{width:9},r.a.createElement(q.a,{src:e.cloudImage})),r.a.createElement(N.a,{as:I.b,to:"/edit/".concat(e.id),primary:!0},"Edit"))})))})),M=n(374),Y=Object(i.b)((function(e){return{notification:e.notification}}),{newNotification:y})((function(e){if(null===e.notification.message)return null;e.notification.type;return"success"===e.notification.type?r.a.createElement("div",null,r.a.createElement(M.a,{success:!0},r.a.createElement(M.a.Header,null,e.notification.message)),r.a.createElement("p",{style:{display:"none"}}," ",setTimeout((function(){return e.newNotification({message:null,type:null})}),5e3))):r.a.createElement("div",null,r.a.createElement(M.a,{negative:!0},r.a.createElement(M.a.Header,null,e.notification.message),r.a.createElement("p",null,"Try again please."),r.a.createElement("p",{style:{display:"none"}}," ",setTimeout((function(){return e.newNotification({message:null,type:null})}),5e3))))})),K=Object(i.b)(null,{edit:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.update(e).then((function(e){n({type:"UPDATE",data:a}),n({type:"NEW",data:{message:"Success! Item updated!",type:"success"}})}),(function(e){n({type:"NEW",data:{message:"Error updating item. Please try again.",type:"negative"}})}));case 2:a=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(e.item.item_name),n=Object(o.a)(t,2),c=n[0],u=n[1],i=Object(a.useState)(e.item.item_description),l=Object(o.a)(i,2),s=l[0],p=l[1],m=Object(a.useState)(null),d=Object(o.a)(m,2),f=d[0],g=d[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(c);var n=new FormData;n.append("item_name",c),n.append("item_description",s),n.append("clodImage",f),e.edit(n)}},r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:c,onChange:function(e){u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:s,onChange:function(e){p(e.target.value)}})),r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target;return g(t.files[0])}}),r.a.createElement("button",{type:"submit"},"Update"))})),Q=n(371),V=Object(i.b)((function(e){return{data:e.data,user:e.loggedUser}}),{initAll:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.getAll(e);case 2:a=t.sent,n({type:"INIT",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),c=n[0],u=n[1];Object(a.useEffect)((function(){e.initAll();var t=window.localStorage.getItem("loggedappUser");if(t){console.log(t);var n=JSON.parse(t);console.log(n),u(JSON.parse(t)),F.setToken(n.token)}}),[e.user]);return r.a.createElement(Q.a,null,r.a.createElement(I.a,null,r.a.createElement(C.b,{exact:!0,path:"/edit/:id",render:function(t){var n,a=t.match;return r.a.createElement(K,{item:(n=a.params.id,e.data.find((function(e){return e.id===n.toString()})))})}}),r.a.createElement(C.b,{exact:!0,path:"/",render:function(){return c?r.a.createElement(B,null):r.a.createElement(C.a,{to:"/login"})}}),r.a.createElement(C.b,{path:"/login",render:function(){return null===c?r.a.createElement(U,null):r.a.createElement(C.a,{to:"/"})}}),r.a.createElement(C.b,{path:"/register",render:function(){return r.a.createElement(L,null)}}),r.a.createElement(C.b,{path:"/create",render:function(){return r.a.createElement(G,null)}}),r.a.createElement(Y,null)))})),X=n(61),Z=n(191),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_FILTER":return t.data;default:return e}},ee=Object(X.c)({data:R,filter:$,loggedUser:b,registeredUser:A,notification:O}),te=Object(X.d)(ee,Object(X.a)(Z.a)),ne=function(){u.a.render(r.a.createElement(i.a,{store:te},r.a.createElement(V,null)),document.getElementById("root"))};ne(),te.subscribe(ne)}},[[204,1,2]]]);
//# sourceMappingURL=main.6fc81c7a.chunk.js.map